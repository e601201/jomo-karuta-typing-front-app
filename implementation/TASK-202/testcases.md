# TASK-202: タイピングゲーム画面 - テストケース設計

## テスト概要

タイピングゲーム画面の全機能を網羅的にテストし、ゲームプレイの品質を保証する。

## テストカテゴリ

### 1. 初期化とルーティングテスト

#### TC-001: ゲームモードの取得

- **前提条件**: URLパラメータ `?mode=practice` でアクセス
- **テスト手順**: ページを読み込む
- **期待結果**:
  - 練習モードが設定される
  - 適切なカードセットが読み込まれる

#### TC-002: 継続パラメータの処理

- **前提条件**: URLパラメータ `?mode=practice&continue=true` でアクセス
- **テスト手順**: ページを読み込む
- **期待結果**:
  - 前回の進捗から再開される
  - 正しいカードインデックスから開始

#### TC-003: 無効なモードの処理

- **前提条件**: URLパラメータ `?mode=invalid` でアクセス
- **テスト手順**: ページを読み込む
- **期待結果**:
  - エラーメッセージが表示される
  - メインメニューへのリンクが表示される

### 2. 札表示テスト

#### TC-004: カード情報の表示

- **前提条件**: ゲームが開始されている
- **テスト手順**: 最初のカードを表示
- **期待結果**:
  - 読み札のテキストが表示される
  - ふりがなが表示される（設定による）
  - カード番号（1/44）が表示される

#### TC-005: カードの切り替え

- **前提条件**: カードを完了
- **テスト手順**: 次のカードに進む
- **期待結果**:
  - 新しいカードが表示される
  - カード番号が更新される
  - アニメーションが実行される

### 3. 入力処理テスト

#### TC-006: 正しい入力の処理

- **前提条件**: カード「つる舞う」が表示
- **テスト手順**: "t"を入力
- **期待結果**:
  - 文字が緑色でハイライトされる
  - 入力位置が次に進む
  - 正解音が鳴る（設定による）

#### TC-007: 誤った入力の処理

- **前提条件**: カード「つる舞う」が表示
- **テスト手順**: "x"を入力
- **期待結果**:
  - 文字が赤色でハイライトされる
  - ミスカウントが増える
  - エラー音が鳴る（設定による）

#### TC-008: 複数入力パターンの対応

- **前提条件**: 「し」の入力が必要
- **テスト手順**:
  1. "shi"で入力
  2. リセット後、"si"で入力
- **期待結果**: 両方のパターンが受け入れられる

#### TC-009: バックスペース処理

- **前提条件**: 文字を入力済み
- **テスト手順**: Backspaceキーを押す
- **期待結果**:
  - 前の文字に戻る
  - ハイライトが更新される

### 4. リアルタイムフィードバックテスト

#### TC-010: ローマ字ガイドの表示

- **前提条件**: カードが表示されている
- **テスト手順**: ローマ字ガイドを確認
- **期待結果**:
  - 正しいローマ字が表示される
  - 現在の入力位置が明示される

#### TC-011: 入力進捗バーの更新

- **前提条件**: カードが表示されている
- **テスト手順**: 文字を入力していく
- **期待結果**:
  - プログレスバーが更新される
  - パーセンテージが正しく計算される

### 5. スコア計算テスト

#### TC-012: WPM計算

- **前提条件**: タイピング中
- **テスト手順**: 一定時間タイピングを続ける
- **期待結果**:
  - WPMが正しく計算される
  - リアルタイムで更新される

#### TC-013: 正確率計算

- **前提条件**: 正解10文字、ミス2文字
- **テスト手順**: 正確率を確認
- **期待結果**:
  - 正確率が83.3%と表示される

#### TC-014: コンボカウント

- **前提条件**: 連続正解中
- **テスト手順**: 5文字連続で正解
- **期待結果**:
  - コンボが5と表示される
  - ミスでリセットされる

### 6. ゲーム制御テスト

#### TC-015: 一時停止機能

- **前提条件**: ゲーム中
- **テスト手順**: 一時停止ボタンをクリック
- **期待結果**:
  - ゲームが一時停止する
  - タイマーが停止する
  - 入力が無効化される

#### TC-016: 再開機能

- **前提条件**: 一時停止中
- **テスト手順**: 再開ボタンをクリック
- **期待結果**:
  - ゲームが再開する
  - タイマーが再開する
  - 入力が有効化される

#### TC-017: スキップ機能

- **前提条件**: カード表示中
- **テスト手順**: スキップボタンをクリック
- **期待結果**:
  - 次のカードに進む
  - スキップがカウントされる

### 7. ゲーム終了テスト

#### TC-018: 全カード完了時の処理

- **前提条件**: 最後のカード
- **テスト手順**: 最後のカードを完了
- **期待結果**:
  - 完了画面が表示される
  - 最終スコアが表示される
  - 結果が保存される

#### TC-019: 途中終了の処理

- **前提条件**: ゲーム中
- **テスト手順**: 終了ボタンをクリック
- **期待結果**:
  - 確認ダイアログが表示される
  - 進捗が保存される
  - メニューに戻る

### 8. データ永続化テスト

#### TC-020: セッションの自動保存

- **前提条件**: ゲーム中
- **テスト手順**: 5枚完了後にページをリロード
- **期待結果**:
  - 進捗が復元される
  - スコアが保持される

#### TC-021: 設定の反映

- **前提条件**: 設定変更済み
- **テスト手順**: ゲームを開始
- **期待結果**:
  - フォントサイズが反映される
  - サウンド設定が反映される
  - その他の設定が適用される

### 9. レスポンシブテスト

#### TC-022: モバイル表示

- **前提条件**: 画面幅375px
- **テスト手順**: ページを表示
- **期待結果**:
  - レイアウトが縦向きに最適化される
  - タッチ操作が可能
  - 文字サイズが適切

#### TC-023: タブレット表示

- **前提条件**: 画面幅768px
- **テスト手順**: ページを表示
- **期待結果**:
  - レイアウトが調整される
  - 適切な余白が確保される

#### TC-024: デスクトップ表示

- **前提条件**: 画面幅1280px
- **テスト手順**: ページを表示
- **期待結果**:
  - 最適なレイアウトで表示される
  - 大きな文字サイズ

### 10. パフォーマンステスト

#### TC-025: 入力レスポンス

- **前提条件**: ゲーム中
- **テスト手順**: キー入力
- **期待結果**:
  - 30ms以内に反応
  - スムーズなアニメーション

#### TC-026: メモリ使用量

- **前提条件**: 長時間プレイ
- **テスト手順**: 30分間プレイ
- **期待結果**:
  - メモリリークがない
  - パフォーマンス劣化がない

### 11. アクセシビリティテスト

#### TC-027: キーボードナビゲーション

- **前提条件**: キーボードのみ使用
- **テスト手順**: Tab/Enter/Spaceで操作
- **期待結果**:
  - すべての機能が操作可能
  - フォーカスが明確

#### TC-028: スクリーンリーダー対応

- **前提条件**: スクリーンリーダー使用
- **テスト手順**: ゲームをプレイ
- **期待結果**:
  - 適切な読み上げ
  - 状態変化の通知

## エッジケース

### EC-001: ネットワーク切断

- **テスト**: プレイ中にネットワーク切断
- **期待結果**: ローカルでゲーム継続可能

### EC-002: ブラウザバック

- **テスト**: ゲーム中にブラウザバック
- **期待結果**: 確認ダイアログ表示、データ保存

### EC-003: 高速入力

- **テスト**: 非常に速い入力（200WPM以上）
- **期待結果**: すべての入力が正しく処理される

## テスト実装優先順位

1. **優先度: 高**
   - TC-006, TC-007（入力処理）
   - TC-004, TC-005（札表示）
   - TC-015, TC-016（一時停止）

2. **優先度: 中**
   - TC-012, TC-013, TC-014（スコア計算）
   - TC-018, TC-019（ゲーム終了）
   - TC-020（データ保存）

3. **優先度: 低**
   - TC-022, TC-023, TC-024（レスポンシブ）
   - TC-025, TC-026（パフォーマンス）
   - TC-027, TC-028（アクセシビリティ）
