# TASK-201: メインメニュー画面 - 要件定義

## 目的

上毛かるたタイピングゲームのエントリーポイントとなるメインメニュー画面を実装する。
ユーザーがゲームモードを選択し、設定や統計へナビゲートできる直感的なインターフェースを提供する。

## 機能要件

### 1. ゲームモード選択 (REQ-007, REQ-101, REQ-102, REQ-103)

- **練習モード**: 全44札を順番に練習
- **特定札練習モード**: 選択した札のみを練習
- **ランダム出題モード**: ランダムな順序で全札を練習

### 2. ナビゲーション機能

- **設定画面へのリンク**: ゲーム設定を変更するための画面への遷移
- **統計画面へのリンク**: 成績や進捗を確認するための画面への遷移

### 3. データ読み込み

- **初期データロード**: ゲーム起動時にかるたデータと設定を読み込む
- **進捗データ取得**: IndexedDBから前回の進捗を読み込む

## UI/UX要件

### 1. ローディング状態

- データ読み込み中はローディングインジケーターを表示
- スケルトンスクリーンまたはスピナーで視覚的フィードバック

### 2. エラーハンドリング

- データ読み込み失敗時にはエラーメッセージを表示
- リトライボタンを提供

### 3. レスポンシブデザイン

- モバイル、タブレット、デスクトップに対応
- タッチ操作とマウス操作の両方に最適化

### 4. アクセシビリティ

- キーボードナビゲーション対応
- フォーカス管理
- ARIA属性の適切な設定
- スクリーンリーダー対応

## 技術要件

### 1. コンポーネント構造

- SvelteKit の `+page.svelte` として実装
- Svelte 5 の新しい `$props()` 構文を使用

### 2. 状態管理

- ゲームストア (`$lib/stores/game.ts`) との連携
- リアクティブな状態更新

### 3. スタイリング

- Tailwind CSS 4.0 を使用
- モバイルファーストアプローチ
- ダークモード対応（将来の拡張用）

### 4. パフォーマンス

- 初期表示時間: 1秒以内
- インタラクティブまでの時間: 2秒以内

## 受け入れ基準

### 必須要件

1. [ ] 3つのゲームモードが選択可能
2. [ ] 設定画面へのナビゲーションが機能する
3. [ ] 統計画面へのナビゲーションが機能する
4. [ ] ローディング状態が適切に表示される
5. [ ] エラーハンドリングが実装されている
6. [ ] モバイル対応が完了している
7. [ ] キーボードナビゲーションが動作する

### 品質基準

1. [ ] Lighthouse スコア 90以上
2. [ ] 型チェックが通る
3. [ ] リントエラーがない
4. [ ] テストカバレッジ 80%以上

## 実装詳細

### ファイル構成

```
src/routes/+page.svelte          # メインメニュー画面
src/routes/+page.spec.ts         # テストファイル
```

### 依存関係

- `$lib/stores/game.ts`: ゲーム状態管理
- `$lib/services/storage/indexed-db.ts`: データ永続化
- `$lib/data/karuta-cards.json`: かるたデータ
- `$lib/types/`: 型定義

### ルーティング

- `/`: メインメニュー（このページ）
- `/game`: ゲーム画面（TASK-202で実装）
- `/settings`: 設定画面（TASK-207で実装）
- `/stats`: 統計画面（TASK-206で実装）

## テスト戦略

### 単体テスト

- 各ボタンのクリックイベント
- ナビゲーション機能
- ローディング状態の表示

### 統合テスト

- ストアとの連携
- データ読み込みフロー

### E2Eテスト（将来実装）

- ユーザーフロー全体の確認
- クロスブラウザテスト
