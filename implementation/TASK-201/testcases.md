# TASK-201: メインメニュー画面 - テストケース設計

## テスト概要

メインメニュー画面の機能を網羅的にテストし、ユーザビリティとアクセシビリティを保証する。

## テストカテゴリ

### 1. 初期表示テスト

#### TC-001: ページタイトルとヘッダーの表示

- **前提条件**: アプリケーションが起動している
- **テスト手順**: メインメニューページにアクセス
- **期待結果**:
  - タイトル「上毛カルタタイピング」が表示される
  - サブタイトルまたは説明文が表示される

#### TC-002: ローディング状態の表示

- **前提条件**: データ読み込みが遅延する状況
- **テスト手順**: ページを読み込む
- **期待結果**:
  - ローディングインジケーターが表示される
  - 「読み込み中...」などのメッセージが表示される

### 2. ゲームモード選択テスト

#### TC-003: 練習モードボタンの表示と機能

- **前提条件**: メインメニューが表示されている
- **テスト手順**:
  1. 練習モードボタンを確認
  2. ボタンをクリック
- **期待結果**:
  - ボタンに「練習モード」のラベルが表示される
  - ボタンに説明文「全44札を順番に練習」が表示される
  - クリックで `/game?mode=practice` に遷移する

#### TC-004: 特定札練習モードボタンの表示と機能

- **前提条件**: メインメニューが表示されている
- **テスト手順**:
  1. 特定札練習モードボタンを確認
  2. ボタンをクリック
- **期待結果**:
  - ボタンに「特定札練習」のラベルが表示される
  - ボタンに説明文「選択した札のみを練習」が表示される
  - クリックで `/game?mode=specific` に遷移する

#### TC-005: ランダム出題モードボタンの表示と機能

- **前提条件**: メインメニューが表示されている
- **テスト手順**:
  1. ランダム出題モードボタンを確認
  2. ボタンをクリック
- **期待結果**:
  - ボタンに「ランダム出題」のラベルが表示される
  - ボタンに説明文「ランダムな順序で練習」が表示される
  - クリックで `/game?mode=random` に遷移する

### 3. ナビゲーションテスト

#### TC-006: 設定画面へのリンク

- **前提条件**: メインメニューが表示されている
- **テスト手順**: 設定ボタン/リンクをクリック
- **期待結果**:
  - `/settings` ページに遷移する
  - アイコンまたは「設定」テキストが表示される

#### TC-007: 統計画面へのリンク

- **前提条件**: メインメニューが表示されている
- **テスト手順**: 統計ボタン/リンクをクリック
- **期待結果**:
  - `/stats` ページに遷移する
  - アイコンまたは「成績」テキストが表示される

### 4. データ読み込みテスト

#### TC-008: カルタデータの読み込み成功

- **前提条件**: 正常なネットワーク接続
- **テスト手順**: ページを読み込む
- **期待結果**:
  - エラーが表示されない
  - ゲームモードボタンが有効になる

#### TC-009: データ読み込みエラーハンドリング

- **前提条件**: データ読み込みが失敗する状況（モック）
- **テスト手順**: エラー状態でページを読み込む
- **期待結果**:
  - エラーメッセージが表示される
  - 「再試行」ボタンが表示される
  - ゲームモードボタンが無効化される

### 5. アクセシビリティテスト

#### TC-010: キーボードナビゲーション

- **前提条件**: キーボードのみを使用
- **テスト手順**:
  1. Tabキーで各要素を移動
  2. Enterキーで選択
- **期待結果**:
  - すべてのインタラクティブ要素にフォーカスが当たる
  - フォーカスインジケーターが表示される
  - Enterキーで機能が実行される

#### TC-011: ARIA属性の確認

- **前提条件**: スクリーンリーダーを使用
- **テスト手順**: 各要素を確認
- **期待結果**:
  - 適切なrole属性が設定されている
  - aria-labelが設定されている
  - ボタンの説明が読み上げられる

### 6. レスポンシブデザインテスト

#### TC-012: モバイル表示（幅 < 640px）

- **前提条件**: ビューポート幅375px
- **テスト手順**: ページを表示
- **期待結果**:
  - ボタンが垂直に配置される
  - テキストサイズが適切
  - タッチターゲットが44px以上

#### TC-013: タブレット表示（640px ≤ 幅 < 1024px）

- **前提条件**: ビューポート幅768px
- **テスト手順**: ページを表示
- **期待結果**:
  - レイアウトが適切に調整される
  - ボタンが2列または3列で配置される

#### TC-014: デスクトップ表示（幅 ≥ 1024px）

- **前提条件**: ビューポート幅1280px
- **テスト手順**: ページを表示
- **期待結果**:
  - 最適な間隔でコンテンツが配置される
  - ホバーエフェクトが有効

### 7. パフォーマンステスト

#### TC-015: 初期表示速度

- **前提条件**: 通常のネットワーク環境
- **テスト手順**: ページを読み込む
- **期待結果**:
  - First Contentful Paint < 1秒
  - Time to Interactive < 2秒

### 8. ストア連携テスト

#### TC-016: ゲーム設定の読み込み

- **前提条件**: LocalStorageに設定が保存されている
- **テスト手順**: ページを読み込む
- **期待結果**:
  - 保存された設定が適用される
  - ストアの状態が正しく初期化される

#### TC-017: 前回のゲーム進捗表示

- **前提条件**: IndexedDBに進捗データがある
- **テスト手順**: ページを読み込む
- **期待結果**:
  - 「続きから」オプションが表示される（該当する場合）
  - 進捗情報が正しく表示される

## エッジケース

### EC-001: LocalStorage無効化

- **テスト**: LocalStorageが無効な環境でアクセス
- **期待結果**: デフォルト設定で動作し、警告メッセージを表示

### EC-002: IndexedDB無効化

- **テスト**: IndexedDBが無効な環境でアクセス
- **期待結果**: 基本機能は動作し、データ保存に関する警告を表示

### EC-003: 低速ネットワーク

- **テスト**: 3G相当の速度でアクセス
- **期待結果**: ローディング表示が適切に表示され、タイムアウトしない

## テスト実装優先順位

1. **優先度: 高**
   - TC-003, TC-004, TC-005（ゲームモード選択）
   - TC-008, TC-009（データ読み込み）
   - TC-010（キーボードナビゲーション）

2. **優先度: 中**
   - TC-001, TC-002（初期表示）
   - TC-006, TC-007（ナビゲーション）
   - TC-012（モバイル表示）

3. **優先度: 低**
   - TC-013, TC-014（タブレット/デスクトップ表示）
   - TC-015（パフォーマンス）
   - TC-016, TC-017（ストア連携）

## 自動化戦略

- **単体テスト**: Vitest + Testing Libraryで実装
- **統合テスト**: ストアとの連携部分をモック化してテスト
- **E2Eテスト**: Playwrightで主要フローをテスト（将来実装）
