# TASK-205: 一時停止機能 - テストケース設計

## テスト概要

一時停止機能の完全性を検証し、ゲーム体験を損なわない中断・再開機能を保証する。

## テストカテゴリ

### 1. 基本動作テスト

#### TC-001: ESCキーによる一時停止

- **操作**: ゲーム中にESCキーを押す
- **期待結果**:
  - ゲームが一時停止する
  - オーバーレイが表示される
  - タイマーが停止する

#### TC-002: ボタンによる一時停止

- **操作**: 一時停止ボタンをクリック
- **期待結果**: TC-001と同じ

#### TC-003: 再開動作

- **前提条件**: 一時停止中
- **操作**: 再開ボタンクリックまたはESCキー
- **期待結果**:
  - カウントダウン表示
  - ゲーム再開
  - タイマー再開

#### TC-004: トグル動作

- **操作**: ESCキーを2回押す
- **期待結果**: 一時停止→再開

### 2. タイマー管理テスト

#### TC-005: タイマー停止の正確性

- **前提条件**: ゲーム開始から10秒後
- **操作**: 一時停止
- **期待結果**:
  - elapsedTime = 10秒
  - 以降増加しない

#### TC-006: 一時停止時間の記録

- **操作**: 5秒間一時停止
- **期待結果**:
  - pausedDuration = 5秒
  - 総プレイ時間から除外

#### TC-007: 複数回の一時停止

- **操作**: 3回一時停止（各2秒）
- **期待結果**:
  - pauseCount = 3
  - totalPauseTime = 6秒

### 3. 入力制御テスト

#### TC-008: 一時停止中の入力無効

- **前提条件**: 一時停止中
- **操作**: キーボード入力
- **期待結果**: 入力が無視される

#### TC-009: 再開後の入力受付

- **操作**: 再開直後に入力
- **期待結果**: 正常に入力処理

#### TC-010: 一時停止直前の入力保持

- **操作**: 入力途中で一時停止
- **期待結果**:
  - 入力状態が保持される
  - 再開後に継続可能

### 4. UI表示テスト

#### TC-011: オーバーレイ表示

- **操作**: 一時停止
- **期待結果**:
  - 半透明背景
  - モーダルウィンドウ
  - blur効果

#### TC-012: 情報表示の正確性

- **前提条件**: 10枚中3枚完了
- **期待結果**:
  - 「3/10枚完了」表示
  - 正しい経過時間
  - 現在のスコア

#### TC-013: カウントダウン表示

- **操作**: 再開
- **期待結果**:
  - 3→2→1のカウントダウン
  - アニメーション付き

### 5. カウントダウンテスト

#### TC-014: 正常なカウントダウン

- **操作**: 再開ボタンクリック
- **期待結果**: 3秒後にゲーム再開

#### TC-015: カウントダウンスキップ

- **操作**: カウントダウン中にスペースキー
- **期待結果**: 即座に再開

#### TC-016: カウントダウン中の再一時停止

- **操作**: カウントダウン中にESC
- **期待結果**: カウントダウンキャンセル

### 6. キーボードショートカットテスト

#### TC-017: ESCキーの動作

- **テスト項目**:
  - 一時停止起動
  - 再開起動
  - トグル動作

#### TC-018: スペースキーオプション

- **前提条件**: 設定で有効化
- **操作**: スペースキー
- **期待結果**: 一時停止/再開

#### TC-019: ショートカットの競合回避

- **操作**: 一時停止中に他のキー
- **期待結果**: 影響なし

### 7. 状態管理テスト

#### TC-020: 状態の一貫性

- **テストシナリオ**:
  1. ゲーム開始
  2. 入力途中で一時停止
  3. 再開
  4. 入力継続
- **期待結果**: 状態に不整合なし

#### TC-021: メモリリーク確認

- **操作**: 100回の一時停止/再開
- **期待結果**: メモリ増加なし

#### TC-022: 並行状態の処理

- **操作**: 高速で一時停止/再開を繰り返す
- **期待結果**: エラーなし

### 8. アニメーションテスト

#### TC-023: フェードイン/アウト

- **測定項目**: アニメーション時間
- **期待結果**: 300ms完了

#### TC-024: スケールアニメーション

- **測定項目**: transform変化
- **期待結果**: 0.95→1.0スムーズ

#### TC-025: FPS維持

- **測定項目**: フレームレート
- **期待結果**: 60fps維持

### 9. フォーカス管理テスト

#### TC-026: タブ切り替え時の動作

- **操作**: ブラウザタブを切り替え
- **期待結果**: 自動一時停止（設定による）

#### TC-027: ウィンドウ最小化

- **操作**: ウィンドウを最小化
- **期待結果**: 自動一時停止

#### TC-028: フォーカス復帰

- **操作**: タブに戻る
- **期待結果**: 一時停止状態維持

### 10. メニュー機能テスト

#### TC-029: 設定画面への遷移

- **操作**: 一時停止中に「設定」クリック
- **期待結果**: 設定画面表示

#### TC-030: メインメニューへ戻る

- **操作**: 「終了」クリック
- **期待結果**:
  - 確認ダイアログ
  - 進捗保存
  - メインメニュー表示

#### TC-031: ゲーム再開キャンセル

- **操作**: 終了→キャンセル
- **期待結果**: 一時停止状態継続

### 11. アクセシビリティテスト

#### TC-032: キーボードナビゲーション

- **操作**: Tabキーでフォーカス移動
- **期待結果**:
  - ボタン間を移動
  - Enterで実行

#### TC-033: スクリーンリーダー対応

- **テスト項目**:
  - 状態の読み上げ
  - ボタンラベル

#### TC-034: 高コントラストモード

- **期待結果**: 視認性確保

### 12. レスポンシブテスト

#### TC-035: モバイル表示

- **画面幅**: 375px
- **期待結果**:
  - 全画面オーバーレイ
  - タッチ操作可能

#### TC-036: タブレット表示

- **画面幅**: 768px
- **期待結果**: 適切なモーダルサイズ

#### TC-037: デスクトップ表示

- **画面幅**: 1280px
- **期待結果**: 中央配置モーダル

### 13. パフォーマンステスト

#### TC-038: 応答時間

- **測定項目**: ESC押下から表示まで
- **期待結果**: < 50ms

#### TC-039: レンダリング性能

- **測定項目**: 初回描画時間
- **期待結果**: < 16ms

#### TC-040: CPU使用率

- **測定項目**: 一時停止中のCPU
- **期待結果**: 最小限

### 14. エッジケーステスト

#### TC-041: ゲーム開始直後の一時停止

- **操作**: 開始0秒で一時停止
- **期待結果**: 正常動作

#### TC-042: ゲーム終了直前の一時停止

- **操作**: 最後の文字入力前に一時停止
- **期待結果**: 正常動作

#### TC-043: 連続的な操作

- **操作**: ESCキー連打
- **期待結果**:
  - デバウンス処理
  - エラーなし

### 15. 統合テスト

#### TC-044: 完全なゲームフロー

- **シナリオ**:
  1. ゲーム開始
  2. 5枚入力
  3. 一時停止
  4. 5分待機
  5. 再開
  6. 完了まで継続
- **期待結果**: 全機能正常

#### TC-045: 他機能との組み合わせ

- **テスト項目**:
  - 部分入力モード中
  - 設定変更後
  - スコア計算

## テスト実装優先順位

### 優先度: 高

1. TC-001〜TC-004（基本動作）
2. TC-005〜TC-007（タイマー管理）
3. TC-008〜TC-010（入力制御）

### 優先度: 中

1. TC-011〜TC-013（UI表示）
2. TC-014〜TC-016（カウントダウン）
3. TC-020〜TC-022（状態管理）

### 優先度: 低

1. TC-023〜TC-025（アニメーション）
2. TC-026〜TC-028（フォーカス管理）
3. TC-035〜TC-037（レスポンシブ）

## 自動化戦略

- 単体テスト: Vitest
- 統合テスト: Testing Library
- E2Eテスト: 手動確認
