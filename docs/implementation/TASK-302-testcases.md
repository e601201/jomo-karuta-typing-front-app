# TASK-302: 特定札練習モード - テストケース

## 1. ストア関連のテストケース

### 1.1 specific-cards-store.ts

#### 初期化テスト

- ストアの初期状態が正しく設定される
- 札選択状態が空のSetで初期化される
- お気に入りリストが空配列で初期化される

#### 札選択機能

- 札を選択できる
- 札の選択を解除できる
- 全選択が動作する
- 全解除が動作する
- 選択数が正しく計算される
- 最低1枚選択のバリデーションが動作する

#### お気に入り機能

- お気に入りを保存できる
- お気に入りを読み込める
- お気に入りを削除できる
- お気に入りの名前を変更できる
- 重複した名前のチェックが動作する

#### 練習設定

- 繰り返し回数を設定できる
- 出題順序を設定できる
- 設定がローカルストレージに保存される

## 2. サービス関連のテストケース

### 2.1 favorites-service.ts

#### CRUD操作

- お気に入りを作成できる
- お気に入りを読み込める
- お気に入りを更新できる
- お気に入りを削除できる

#### データ永続化

- IndexedDBに保存される
- リロード後も復元される
- データ整合性が保たれる

#### エラーハンドリング

- 容量超過時の処理
- 不正なデータ形式の処理
- IndexedDB未対応環境での代替処理

## 3. コンポーネントのテストケース

### 3.1 CardSelector.svelte

#### 表示

- 44枚の札が表示される
- 選択状態が視覚的に表示される
- 選択数カウンターが表示される

#### インタラクション

- クリックで選択/解除ができる
- 全選択ボタンが動作する
- 全解除ボタンが動作する
- キーボード操作ができる（アクセシビリティ）

#### レスポンシブ

- モバイル表示が適切
- タブレット表示が適切
- デスクトップ表示が適切

### 3.2 FavoritesManager.svelte

#### お気に入り管理

- お気に入りリストが表示される
- 新規作成ダイアログが開く
- 名前入力のバリデーションが動作する
- 削除確認ダイアログが表示される

#### お気に入り操作

- お気に入りを選択して札を復元できる
- お気に入りを削除できる
- お気に入りの名前を編集できる

### 3.3 SpecificPracticeSettings.svelte

#### 設定UI

- 繰り返し回数選択が表示される
- 出題順序選択が表示される
- デフォルト値が正しく設定される

#### バリデーション

- 最低1枚選択の警告が表示される
- 開始ボタンの有効/無効が切り替わる

## 4. 統合テストケース

### 4.1 特定札練習フロー

#### 札選択から練習開始まで

1. 特定札練習モードを選択
2. 練習したい札を選択（複数）
3. 設定を行う（繰り返し、順序）
4. 練習を開始
5. 選択した札のみが出題される

#### お気に入り利用フロー

1. 札を選択
2. お気に入りとして保存
3. 別セッションでお気に入りを読み込み
4. 保存した札が選択される
5. 練習を開始

#### 繰り返し練習フロー

1. 札を3枚選択
2. 繰り返し3回を設定
3. 練習開始
4. 3枚×3回=9枚が出題される
5. 完了画面が表示される

## 5. エッジケースのテストケース

### 5.1 境界値テスト

- 札を0枚選択した場合
- 札を1枚だけ選択した場合
- 札を44枚全て選択した場合
- お気に入り名が空文字の場合
- お気に入り名が最大文字数の場合

### 5.2 エラー処理テスト

- ローカルストレージ容量超過
- IndexedDB接続エラー
- 不正なデータ形式の読み込み
- ネットワークエラー（将来の拡張用）

### 5.3 並行処理テスト

- 複数タブでの同時操作
- 自動保存との競合
- ストレージイベントの処理

## テスト実装優先順位

1. **優先度：高**
   - ストアの基本機能（札選択、解除）
   - 最低1枚選択のバリデーション
   - 選択した札のみの出題

2. **優先度：中**
   - お気に入り機能
   - 繰り返し練習
   - データ永続化

3. **優先度：低**
   - キーボード操作
   - エラーハンドリング
   - 並行処理
