<script lang="ts">
	import type { RandomModeDifficulty } from '$lib/types';

	interface Props {
		show: boolean;
		onClose: () => void;
		onSelect: (difficulty: RandomModeDifficulty) => void;
	}

	let { show, onClose, onSelect }: Props = $props();

	function handleSelect(difficulty: RandomModeDifficulty) {
		onSelect(difficulty);
		onClose();
	}

	function handleBackdropClick(e: MouseEvent) {
		if (e.target === e.currentTarget) {
			onClose();
		}
	}
</script>

{#if show}
	<!-- svelte-ignore a11y_click_events_have_key_events -->
	<!-- svelte-ignore a11y_no_static_element_interactions -->
	<div
		class="animate-fadeIn fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4"
		onclick={handleBackdropClick}
	>
		<div class="animate-scaleIn w-full max-w-md rounded-lg bg-white p-6">
			<h2 class="mb-6 text-center text-2xl font-bold text-gray-900">é›£æ˜“åº¦ã‚’é¸æŠ</h2>

			<div class="space-y-4">
				<button
					onclick={() => handleSelect('beginner')}
					class="group w-full rounded-lg border-2 border-green-200 p-4 text-left transition-all hover:border-green-400 hover:bg-green-50"
				>
					<div class="flex items-start gap-3">
						<span class="text-2xl">ğŸ”°</span>
						<div class="flex-1">
							<h3 class="text-lg font-semibold text-gray-900 group-hover:text-green-600">
								åˆå¿ƒè€…ãƒ¢ãƒ¼ãƒ‰
							</h3>
							<p class="mt-1 text-sm text-gray-600">ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§ç·´ç¿’</p>
							<p class="mt-1 text-xs text-gray-500">çŸ­ã„èª­ã¿æœ­ï¼ˆ5-10æ–‡å­—ç¨‹åº¦ï¼‰</p>
						</div>
					</div>
				</button>

				<button
					onclick={() => handleSelect('standard')}
					class="group w-full rounded-lg border-2 border-blue-200 p-4 text-left transition-all hover:border-blue-400 hover:bg-blue-50"
				>
					<div class="flex items-start gap-3">
						<span class="text-2xl">ğŸ“–</span>
						<div class="flex-1">
							<h3 class="text-lg font-semibold text-gray-900 group-hover:text-blue-600">
								æ¨™æº–ãƒ¢ãƒ¼ãƒ‰
							</h3>
							<p class="mt-1 text-sm text-gray-600">ã™ã¹ã¦ã®èª­ã¿æœ­</p>
							<p class="mt-1 text-xs text-gray-500">é€šå¸¸ã®èª­ã¿æœ­ï¼ˆ13-19æ–‡å­—ï¼‰</p>
						</div>
					</div>
				</button>

				<button
					onclick={() => handleSelect('advanced')}
					class="group w-full rounded-lg border-2 border-red-200 p-4 text-left transition-all hover:border-red-400 hover:bg-red-50"
				>
					<div class="flex items-start gap-3">
						<span class="text-2xl">âš¡</span>
						<div class="flex-1">
							<h3 class="text-lg font-semibold text-gray-900 group-hover:text-red-600">
								ä¸Šç´šè€…ãƒ¢ãƒ¼ãƒ‰
							</h3>
							<p class="mt-1 text-sm text-gray-600">ç«¶æŠ€ã‹ã‚‹ãŸå¼</p>
							<p class="mt-1 text-xs text-red-600">
								å–ã‚Šæœ­ã®ã¿è¡¨ç¤ºãƒ»èª­ã¿æœ­ã®æš—è¨˜å¿…é ˆ
							</p>
						</div>
					</div>
				</button>
			</div>

			<button
				onclick={onClose}
				class="mt-6 w-full py-2 text-sm text-gray-600 transition-colors hover:text-gray-800"
			>
				ã‚­ãƒ£ãƒ³ã‚»ãƒ«
			</button>
		</div>
	</div>
{/if}

<style>
	@keyframes fadeIn {
		from {
			opacity: 0;
		}
		to {
			opacity: 1;
		}
	}

	@keyframes scaleIn {
		from {
			transform: scale(0.9);
			opacity: 0;
		}
		to {
			transform: scale(1);
			opacity: 1;
		}
	}

	.animate-fadeIn {
		animation: fadeIn 0.2s ease-out;
	}

	.animate-scaleIn {
		animation: scaleIn 0.2s ease-out;
	}
</style>
